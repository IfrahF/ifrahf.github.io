---
title: "Instacart Dashboard"
output: 
  flexdashboard::flex_dashboard:
    orientation: columns
    vertical_layout: fill
    source_code: embed
---

```{r setup, include=FALSE}
library(tidyverse)
library(p8105.datasets)
data("instacart")
library(plotly)
library(flexdashboard)
```

Column {data-width=650}
-----------------------------------------------------------------------

### Chart A

```{r}
fig1 = 
  instacart %>%
    count(aisle, sort = TRUE) %>%
    filter(n > 5000) %>%
    mutate(aisle = reorder(aisle,n)) %>%
    plot_ly(x = ~aisle, y = ~n, color = ~aisle, type = "bar", colors = "viridis")

fig1 = fig1 %>% 
  layout(title = 'Aisles by count of items ordered',
         xaxis = list(title = 'Aisle',
         yaxis = list(title = 'Count of Items Ordered')))

fig1
```

Column {data-width=350}
-----------------------------------------------------------------------

### Chart B

```{r, eval=FALSE}
set.seed(1)
fig2 = instacart %>%
  arrange(order_dow) %>%
  mutate(order_dow = recode(order_dow, "0" = "Sunday", "1" = "Monday", "2" = "Tuesday", "3" = "Wednesday", "4" = "Thursday", "5" = "Friday", "6" = "Saturday")) %>%
  filter(aisle == "fresh vegetables")

fig2 %>%
  mutate(text_label = str_c("Day of the Week: ", order_dow, "\nHour of Day: ", order_hour_of_day)) %>%
  plot_ly(x = ~order_dow, y = ~order_hour_of_day, type = "scatter", mode = "markers", color = ~order_dow, text = ~text_label, alpha = 0.5)

```

### Chart C

```{r}

```

